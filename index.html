---
layout: default
title: Home
header:
stylesheet: /assets/main.css
description: Discover our spice test database with detailed lead levels in various brands. Interactive features enable easy sorting and filtering of key data.
---

<div id="picturebox">
  <div id="tagline-holder">
    <h1>
      <span id="percentile-container"
        ><span id="percentile-val">50</span>%</span
      >
      of spices contain over
      <span id="ppb-container"><span id="ppb-val">212.0</span> ppb</span> of
      lead
    </h1>
    <div id="actions">
      <a href="/database">View Database</a>
      <a href="/pages/take-action.html">Take Action</a>
    </div>
  </div>
  <div id="slider-holder">
    <canvas width="600" height="400"></canvas>
    <input id="slider" type="range" min="0" max="100" />
  </div>
</div>
<script src="/static/javascript/color_picking.js"></script>
<script src="/static/javascript/utils.js"></script>
<script>
  let ppb = document.getElementById("ppb-val");
  let percentile = document.getElementById("percentile-val");
  percentile.innerText = 50;
  let slider = document.querySelector("#slider");
  function setTagline() {
    let value = slider.value;
    let color = pickColor(value);
    ppb.style.color = color;
    ppb.innerText = determineLead(value).toFixed(1);
    percentile.innerText = (100 - value).toFixed(0);
  }
  setTagline();
  slider.addEventListener("input", setTagline);

  /* canvas stuff */
  let canvas = document.querySelector("canvas");
  let ctx = canvas.getContext("2d");
  const stdDeviation = 100;
  const bar_width = 3;
  function gaussian(x) {
    return Math.exp(
      -Math.pow(x - canvas.width / 2, 2) / (2 * stdDeviation * stdDeviation)
    );
  }
  function drawCurve() {
    const width = canvas.width;
    const height = canvas.height;
    const mean = width * (slider.value / 100);
    // Filling the left half under the curve with black
    for (let x = 0; x < mean; x++) {
      const y = gaussian(x);
      const yPos = height - y * height; // Scale to canvas height
      ctx.fillStyle = pickColor((100 * x) / width);
      ctx.fillRect(x, yPos, 1, height - yPos);
    }
    for (let x = mean; x < mean + bar_width; x++) {
      const y = gaussian(x);
      const yPos = height - y * height; // Scale to canvas height
      ctx.fillStyle = "black";
      ctx.fillRect(x, yPos, 1, height - yPos);
    }
    // Filling the right half under the curve with white
    for (let x = mean + bar_width; x < width; x++) {
      const y = gaussian(x);
      const yPos = height - y * height; // Scale to canvas height
      ctx.fillStyle = pickColor((100 * x) / width);
      ctx.fillRect(x, yPos, 1, height - yPos);
    }
  }
  drawCurve();
  slider.addEventListener("input", drawCurve);
</script>
